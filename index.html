<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Simple Demo</title>
  <link rel="stylesheet" href="./node_modules/openlayers/dist/ol.css">
  <link rel="stylesheet" href="./core/sknight_gis.css">
</head>

<body>
  <div id="map"></div>
  <!--[if lte IE 9]>
    <script src="./polyfill/classList.min.js"></script>
    <script src="./polyfill/request-animation-frame.js"></script>
  <![endif]-->
  <script src="./node_modules/jquery/dist/jquery.min.js"></script>
  <script src="./node_modules/openlayers/dist/ol.js"></script>
  <script src="./node_modules/art-template/lib/template-web.js"></script>
  <script src="./core/sknight_gis.js"></script>
  <script>
    var gisOptions = {
      target: document.getElementById('map'),
      layers: {
        baseMap: [{
          label: '基础底图',
          url: 'http://mt{0-3}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',
          //url: 'http://t5.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}',
          layerName: 'basic',
        }
          // {
          //     label: '街道底图',
          //     url: 'https://api.mapbox.com/styles/v1/sknight/ciy13vljr004f2so6gd293aaz/tiles/256/{z}/{x}/{y}' + access_token,
          //     layerName: 'street',
          // }, {
          //     label: '卫星底图',
          //     url: 'https://api.mapbox.com/styles/v1/sknight/cizhzfx9z000g2spapja22psw/tiles/256/{z}/{x}/{y}' + access_token,
          //     layerName: 'satellite',
          // }
        ],
        boundary: {
          enable: true,
          items: [{
            name: 'boundary',
            url: './data/boundary-nb.json',
          }]
        }
      },
      view: {
        center: [121.5472412109375, 29.870419710858783],
        zoom: 11,
        //minZoom: 9,
        //maxZoom: 13
      },
      controls: {
        // 全屏功能
        fullScreen: {
          enable: true
        },
        // 鹰眼功能
        overviewMap: {
          enable: true
        },
        //回归中心点
        setCenter: {
          enable: true
        }
      },
      tools: {
        title: false, // 标题
        popup: true, // 弹出框
        draw: false,
        switchBaseMap: true, // 底图切换
        mousePosition: true
      },
      // extent: {
      //     bound: [
      //         [121.208840, 29.755223],
      //         [122.018881, 30.302205]
      //     ]
      // }
    };
    var map = sntMap(gisOptions);
    var extent = [113.143497,22.054454,113.413314,22.185721];
    map.addContourImg('http://127.0.0.1:8080/test.svg', 'test',
      extent, [239.98,239.98], 1)
    // 转换为web merctor投影
    var destinationPro = "EPSG:3857";
    // 地理原始投影
    var sourcePro = "EPSG:4326";
    map.on("singleclick", function (e) {
      console.log(ol.proj.transform(e.coordinate, destinationPro, sourcePro));
    });
  </script>
</body>

</html>